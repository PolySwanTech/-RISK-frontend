<section class="dashboard-container">
  <!-- En-tête avec titre et boutons d'action -->
  <mat-card class="dashboard-header-card">
    <mat-card-content class="dashboard-header">
      <h1>Tableau de bord</h1>
      <div class="header-controls">
        <button mat-raised-button class="btn-green">
          <mat-icon>file_download</mat-icon>
          Exporter
        </button>
        <button (click)="refreshData()" mat-raised-button class="btn-primary">
          <mat-icon>refresh</mat-icon>
          Actualiser
        </button>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Section des filtres -->
  <mat-card class="filters-card">
    <mat-card-content class="filters-section">
      <div class="filters-header">
        <div>
          <mat-icon>filter_alt</mat-icon>
          <span class="filters-title">Filtres</span>
        </div>
      </div>
      <app-filter-table [availableFilters]="filtersConfig"
                    (filtersChanged)="handleFiltersChanged($event)">
                </app-filter-table>
    </mat-card-content>
  </mat-card>

  <!-- Vos graphiques existants -->
  <div class="graphs-container">
    <app-action-plan-chart></app-action-plan-chart>
    <app-control-chart></app-control-chart>
  </div>

  <div class="graphs-container">

    @if(incidents && incidents.length > 0) {
      <app-bar-chart [incidents]="incidents"></app-bar-chart>
      <app-doughnut-chart [incidents]="incidents"></app-doughnut-chart>
    } @else {
      <p class="no-incidents">Aucun incident à afficher.</p>
    }

  </div>
</section>