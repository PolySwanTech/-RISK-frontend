<div class="main-content">
    <div class="content-header">
        <div>
            <h1 class="page-title">ParamÃ¨tres d'EntrÃ©e</h1>
            <p class="page-subtitle">Configuration des donnÃ©es pour le calcul des risques bancaires</p>
        </div>
        <div class="header-actions">
            <button class="btn btn-primary" (click)="refreshData()">ğŸ”„ Actualiser</button>
        </div>
    </div>

    <form #parametersForm="ngForm" (ngSubmit)="onSubmit()">
        <!-- DonnÃ©es FinanciÃ¨res -->
        <div class="form-section">
            <div class="section-header">
                <h2 class="section-title">ğŸ’° DonnÃ©es FinanciÃ¨res</h2>
                <p class="section-description">10 paramÃ¨tres - Montants en millions d'euros</p>
            </div>
            <div class="section-content">
                <div class="form-grid">
                    <div class="form-group" *ngFor="let field of financialFields">
                        <label>{{ field.label }} <span class="required">*</span></label>
                        <div class="currency-suffix">
                            <input type="number" [(ngModel)]="formData[field.name]" name="{{field.name}}" step="0.01"
                                required>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Historique des pertes -->
        <div class="form-section">
  <div class="section-header">
    <h2 class="section-title">ğŸ“ˆ Historique des Pertes</h2>
    <p class="section-description">1 paramÃ¨tre - DonnÃ©es sur 10 ans maximum</p>
  </div>

  <div class="section-content">
    <div class="form-group">
      <label>Pertes annuelles totales <span class="required">*</span></label>
      <p class="help-text">CalculÃ© depuis l'appli ou Ã  importer</p>

      <button class="btn btn-success" (click)="importData()">ğŸ“¥ Importer</button>

      <div class="losses-grid">
        <div class="year-input" *ngFor="let year of years">
          <div class="year-label">{{ year }}</div>
          <div class="currency-suffix">
            <input type="number"
       [(ngModel)]="formData.pertes_annuelles[year]"
       name="perte_{{year}}"
       (ngModelChange)="updateChart()"
       step="0.01"
       placeholder="0.00">
          </div>
        </div>
      </div>

      <!-- Graphique -->
      <div style="margin-top: 20px;">
        <canvas baseChart
                [data]="lineChartData"
                [options]="lineChartOptions"
                chartType="line">
        </canvas>
      </div>
    </div>
  </div>
</div>

        <!-- ParamÃ¨tres rÃ©glementaires -->
        <div class="form-section">
            <div class="section-header">
                <h2 class="section-title">âš–ï¸ ParamÃ¨tres RÃ©glementaires</h2>
                <p class="section-description">2 paramÃ¨tres - Configuration rÃ©glementaire</p>
            </div>
            <div class="section-content">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Exemption ILM</label>
                        <div class="checkbox-group">
                            <input type="checkbox" [(ngModel)]="formData.exemption_ilm" name="exemption_ilm"
                                id="exemption_ilm">
                            <label for="exemption_ilm">La banque est exemptÃ©e du calcul ILM</label>
                        </div>
                        <p class="help-text">Valeur par dÃ©faut : Non exemptÃ©e</p>
                    </div>
                    <div class="form-group">
                        <label>Ratio CET1 exigÃ© <span class="required">*</span></label>
                        <div class="percentage-suffix">
                            <input type="number" [(ngModel)]="formData.ratio_cet1" name="ratio_cet1" step="0.01" min="0"
                                max="100" required>
                        </div>
                        <p class="help-text">Valeur par dÃ©faut : 8.00%</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Boutons -->
        <div class="form-actions">
            <button type="button" class="btn btn-secondary" (click)="resetForm()">ğŸ”„ RÃ©initialiser</button>
            <button type="submit" class="btn btn-success">ğŸš€ Calculer les Risques</button>
        </div>
    </form>
</div>