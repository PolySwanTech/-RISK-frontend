<div class="container">
  <h2>Créer un Plan d'Action</h2>

  <form (ngSubmit)="submitActionPlan()">
    <!-- Informations du Plan d'Action -->
    <div>
      <label for="libelle">Libellé</label>
      <input id="libelle" [(ngModel)]="actionPlan.libelle" name="libelle" required>
    </div>

    <div>
      <label for="description">Description</label>
      <textarea id="description" [(ngModel)]="actionPlan.description" name="description" required></textarea>
    </div>

    <div>
      <label for="priority">Priorité</label>
      <select id="priority" [(ngModel)]="actionPlan.priority" name="priority"> 
        @for(priority of priorities; track priority) {
          <option [value]="priority">{{ formatPriority(priority) }}</option>
        }
      </select>
    </div>

    <div>
      <label for="echeance">Échéance</label>
      <input id="echeance" type="date" [(ngModel)]="actionPlan.echeance" name="echeance" required>
    </div>

    <!-- Liste des actions -->
    <div class="actions-container">
      <label for="actions">Actions à effectuer</label>
      <div class="actions-list">
        @for(action of actionPlan.actions; track action) {
          <div class="add-action">
            <input 
              [(ngModel)]="action.name"
              placeholder="Entrez une action"
              name="actionName{{action.id}}"
              (keyup.enter)="addAction()"
              class="action-input"
            />
            <button type="button" (click)="removeAction(action.id)" class="remove-btn">X</button>
          </div>
        }

        <!-- Champ d'ajout d'action -->
        <div class="add-action">
          <input 
            [(ngModel)]="newAction.name"
            placeholder="Entrez une action"
            name="newActionName"
            (keyup.enter)="addAction()"
            class="action-input"
          />
          <button type="button" (click)="addAction()" class="add-btn">+</button>
        </div>
      </div>
    </div>

    <button type="submit" class="submit-btn">Créer le Plan d'Action</button>
  </form>
</div>
