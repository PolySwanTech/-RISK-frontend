<div [ngClass]="!data ? 'body-container' : ''">
  <app-go-back *ngIf="!data" [title]="'Création d\'un évenement de risque'" />

  <section>
    <div class="form-container" [ngStyle]="data ? { width: 'auto' } : {}">
      <h2>{{ pageTitle }}</h2>

      <!-- le stepper n’est affiché que lorsque l’objet risk est prêt -->
      @if (risk) {
      <form [formGroup]="infoForm">
            <!-- Titre --------------------------------------------------------- -->
            <mat-form-field class="full-width">
              <mat-label>Titre du risque</mat-label>
              <input matInput formControlName="libellePerso" placeholder="Entrez le titre du risque" />
            </mat-form-field>

            <button style="margin-bottom: 20px;" mat-stroked-button (click)="openRiskEventDialog()">
              <mat-icon>add</mat-icon>
              Associer Risque *
            </button>
            <mat-chip-listbox style="margin-bottom: 20px;" *ngIf="risk && risk.libelle">
              <mat-chip> Taxonomie : {{ risk.libelle }}</mat-chip>
            </mat-chip-listbox>

            <app-select-arborescence tooltip="Sélectionnez le processus associé" *ngIf="listProcess.length > 0"
              [id]="infoForm.get('processId')!.value" (changeValue)="onProcessSelected($event)"
              placeholder="Sélectionnez un processus" [list]="listProcess">
            </app-select-arborescence>

            <mat-form-field class="full-width">
              <mat-label>Description</mat-label>
              <input matInput formControlName="description" placeholder="Saisir une description"/>
            </mat-form-field>

            <div class="actions">

              <button mat-raised-button class="btn-red" matStepperPrevious *ngIf="risk.id">
                Annuler
              </button>

              <button mat-raised-button class="btn-primary" (click)="submit()" [disabled]="infoForm.invalid">
                Soumettre
              </button>
            </div>
          </form>
      }
    </div>
  </section>
</div>