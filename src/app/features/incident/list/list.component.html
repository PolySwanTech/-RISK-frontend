<div class="list-container">
    <button class="add-button" mat-raised-button (click)="add()">Ajouter</button>
    <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">
        (matSortChange)="announceSortChange($event)">
        <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef> ID </th>
            <td mat-cell *matCellDef="let incident"> #{{incident.id}} </td>
        </ng-container>

        <!-- Symbol Column -->
        <ng-container matColumnDef="dateDeclaration">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Date de déclaration </th>
            <td mat-cell *matCellDef="let incident"> {{incident.dateDeclaration.split('T')[0]}} </td>
        </ng-container>

        <ng-container matColumnDef="dateSurvenance">
            <th mat-header-cell *matHeaderCellDef> Date de survenance </th>
            <td mat-cell *matCellDef="let incident"> {{incident.dateSurvenance.split('T')[0]}} </td>
        </ng-container>


        <ng-container matColumnDef="entiteResponsable">
            <th mat-header-cell *matHeaderCellDef> Entité Responsable </th>
            <td mat-cell *matCellDef="let incident"> {{incident.entiteImpacte[0].name}} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky : true"></tr>
        <tr mat-row (click)="onRowClick(row)" *matRowDef="let row; columns: displayedColumns;"></tr>

    </table>
    <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons aria-label="Select page of periodic elements">
    </mat-paginator>

    <!-- @if(selectedIncident){
    @for(impact of selectedIncident.impacts; track impact.id){
    <mat-card class="impact-card">
        <mat-card-header>
            <mat-card-title>{{impact.type}}</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <p>Montant: {{impact.montant}}</p>
            <p>Date: {{impact.date.toString().split('T')[0]}}</p>
            <p>Entité Responsable: {{impact.entiteResponsable.name}}</p>
        </mat-card-content>
    </mat-card>
    }
    } -->
</div>