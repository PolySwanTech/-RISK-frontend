<!-- Rien à afficher tant qu’aucun risque sélectionné -->
<div *ngIf="!riskData" class="no-risk-selected">
  Sélectionnez un risque pour afficher les détails.
</div>

<!-- Affichage du risque -->
<div *ngIf="riskData"
     class="risk-wrapper">

  <!-- ===================== Infos principales ===================== -->
  <div class="risk-info-grid">

    <div class="info-row">
      <span class="label">Référence :</span>
      <span class="value">{{ riskData.reference }}</span>
    </div>
    
    <div class="info-row">
      <span class="label">Libellé :</span>
      <span class="value">{{ riskData.libelle }}</span>
    </div>

    <div class="info-row">
      <span class="label">Sous-catégorie :</span>
      <span class="value">{{ riskData.categoryL2.name }}</span>
    </div>

    <div class="info-row">
      <span class="label">Processus :</span>
      <span class="value">
        {{ processName }}
      </span>
    </div>

    <div class="info-row">
      <span class="label">Business Unit :</span>
      <span class="value">{{ buName }}</span>
    </div>

    <div class="info-row">
      <span class="label">Probabilité :</span>
      <span class="value probability">{{ getProbabilityText() }}</span>
    </div>

    <div class="info-row">
      <span class="label">Risque inhérent :</span>
      <span class="value badge"
            [ngClass]="riskClass">{{ riskLabel }}</span>
    </div>

    <div class="info-row">
      <span class="label">Risque résiduel :</span>
      <span class="value impact">{{ getImpactText() }}</span>
    </div>
  </div>

  <!-- ===================== Description ===================== -->
  <h4>Description :</h4>
  <p class="description-text">
    {{ riskData.description }}
  </p>

  <!-- ===================== Contrôles ===================== -->
  <h4>Contrôles :</h4>
  <ul class="controls-list">
    <li *ngFor="let ctrl of riskData.controls">{{ ctrl }}</li>
  </ul>

  <!-- ===================== Actions ===================== -->
  <div class="action-buttons">
    <button mat-raised-button color="primary"
            (click)="onModifyClick()">
      <mat-icon>edit</mat-icon>
      Modifier
    </button>
  </div>

</div>
